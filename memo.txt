
== コンセプト

* 小さく循環させる
* 長いサイクルを生み出す短いサイクル
* 非同期のコミットを家族や友達と

* ぽこぽこわいて来る楽しみなくじ
* 常時選択

== events

コンセプトは抽選と選択（カード使用）。

eventは結果だけあればよい。表示は概要=>結果の2段階。
消費期限を過ぎると消滅する。

 モンスター(遭遇) -> HP減少判定
   has_many :monsters
     -> monster        
     -> monster        

 V V V

 宝箱(トレジャー ) -> 罠解除判定 (-> 罠発動)
   has_many :items
     -> item
     -> item

選択 ... カードの使用

* リターンのカード
* スキップ（スルー）のカード
* 幸運

* 遭遇系
** 勝利 ... 経験値, HP減少
** 人
** 宝箱 ... 金、アイテム
** 採取 ... アイテム

** 鍛冶 ... アイテム

== カード

eventオープン前に使用可能。

== 通常バトル

* won, escape, lost
* メンバーのHPが1減る（doll毎に判定）
* レベルアップやアイテムの配分は町で（結果に干渉させないため）

== ボス戦

コンセプトは暇つぶし。

ひたすら打撃。打撃、打撃、打撃...
HP3000を1ずつ削る。するとなんと次はHPが倍に。

ただ真ん中にいるデカイやつをみんなで倒すだけのiOSアプリはどうだろうか？

* 炭鉱とか錬金の研磨とか

== 選ばれる選ばれし者

* free dollは町にやってくる
* 君主の魅力が高いと強いdollが出現しやすい ... 君主は魅力だけ高けりゃそれでいい

ストック
招待のカード

== todo

* どういう仕組でrunを呼び出すか
** オブジェクトに次回の更新時間を記録しておき、過ぎたものを検索する
* 5分で遊んでる感はどう出す？ 
** dollにアクション回数やイベント回数を蓄積していく
** or メッセージ、宝箱や成果物を蓄積していく
** 出撃、遭遇、撃退、発見 ... 脱出
* 手動アクションと放置アクション　
** 探検は手動アクション <=> 戦闘訓練
** 錬金 <=> 基礎調合
** ポーションの作成は手動アクション ... 「ポーションたくさん作っといたよ」
** 薬草の栽培は放置アクション ... 「明後日には薬草がとれるはず」

== Dollの状態

* Sleep ... 休息。町で疲労が蓄積していると勝手に寝る。30分ほどで疲労は90%抜けるので叩き起こすこと

* Follow ... 魅力の高い相手程やる気がアップ（疲労がたまりにくい）
* Guard ... ターゲットを守る

== Dollのアクション

Jobとアクションを1対1で関連付ける。

* Explore ... 探検。ダンジョンへ探索してアイテムを探す
** fig.戦士 ... モンスター退治がメイン
** mag.魔法使い... 知識の探求。素材集め
** thi.シーフ ... 宝探し。Treasure Hunt
* alc.Alchemy ... みんなでレシピデザインをやりたいなあ => githubで共有！
* smi.Blacksmith.鍛冶:鍛冶師
* loa.統治:君主 ... ガードがいないと暗殺される

== 遊び方

 jewel user:create

 jewel dolls

 jewel choice DOLL_ID

 jewel mvt TOWN_ID

 jewel mvd DUNGEON_ID

== action

* 退治 ... 町の治安が良くなり町の人口が増える
* 冒険 ... お宝ゲット
* 寄付 ... 聖堂が発展
* 農業 ... 農作物の収穫量アップ
* 畜産 ... 動物を育てる
* 整備 ... 道をつくる

== town

町がレベルアップすると以下のいずれかの要素がパワーアップする。

* INN ... 宿屋レベルは体力の回復力に影響する
* SHOP
* TAVERN
* TEMPLE
* CASTLE
* 鍛冶屋
* 農場
* 牧場
* 交通

* has_many :users
* has_many :shops
* has_many :dungions
* has_many :feilds

